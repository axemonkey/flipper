(()=>{var h=["flip","fade","zoomIn","zoomOut","slide","reveal","spin","blinds","random"];var w=(s,o)=>{let n="300px",i=s,t=i.dataset.filename;i.classList.add("moving"),i.style.backgroundImage="url(".concat(e.coversPath).concat(t,"), url(").concat(e.coversPath).concat(o,")");let a=i.animate([{transform:"perspective(".concat(n,") rotateY(0deg)")},{transform:"perspective(".concat(n,") rotateY(-90deg)")}],{duration:Number(e.transitionDuration)/2,iterations:1,fill:"forwards",easing:"ease-in"});a.cancel();let r=i.animate([{transform:"perspective(".concat(n,") rotateY(90deg)")},{transform:"perspective(".concat(n,") rotateY(0deg)")}],{duration:Number(e.transitionDuration)/2,iterations:1,fill:"forwards",easing:"ease-out"});r.cancel(),a.onfinish=()=>{i.style.backgroundImage="url(".concat(e.coversPath).concat(o,")"),d(o),i.dataset.filename=o,r.play()},r.onfinish=()=>{i.classList.remove("moving"),c()},a.play()};var x=(s,o)=>{let n=s,i=n.style.left,t=n.style.top,a=document.createElement("div");a.classList.add("c"),a.classList.add("moving"),a.style.width="".concat(e.size,"px"),a.style.height="".concat(e.size,"px"),a.style.left=i,a.style.top=t,a.style.backgroundImage="url(".concat(e.coversPath).concat(o,")"),a.style.opacity=0,e.container.append(a);let r=a.animate([{opacity:0},{opacity:1}],{duration:Number(e.transitionDuration),iterations:1,fill:"forwards",easing:"ease-in"});r.cancel(),r.onfinish=()=>{n.style.backgroundImage="url(".concat(e.coversPath).concat(o,")"),n.dataset.filename=o,a.remove(),c()},d(o),r.play()};var C=(s,o)=>{let n=s;n.classList.add("plughole");let i=document.createElement("div");i.classList.add("moving"),i.style.width="0",i.style.height="0",i.style.backgroundImage="url(".concat(e.coversPath).concat(o,")"),n.append(i);let t=i.animate([{width:0,height:0},{width:"".concat(e.size,"px"),height:"".concat(e.size,"px")}],{duration:Number(e.transitionDuration),iterations:1,fill:"forwards",easing:"ease-in"});t.cancel(),t.onfinish=()=>{n.classList.remove("plughole"),n.style.backgroundImage="url(".concat(e.coversPath).concat(o,")"),n.dataset.filename=o,i.remove(),c()},d(o),t.play()};var L=(s,o)=>{let n=s,i=n.dataset.filename;n.classList.add("plughole");let t=document.createElement("div");t.classList.add("moving"),t.style.width="".concat(e.size,"px"),t.style.height="".concat(e.size,"px"),t.style.backgroundImage="url(".concat(e.coversPath).concat(i,")"),n.append(t),n.style.backgroundImage="url(".concat(e.coversPath).concat(o,")");let a=t.animate([{width:"".concat(e.size,"px"),height:"".concat(e.size,"px")},{width:0,height:0}],{duration:Number(e.transitionDuration),iterations:1,fill:"forwards",easing:"ease-in"});a.cancel(),a.onfinish=()=>{n.classList.remove("plughole"),n.dataset.filename=o,t.remove(),c()},d(o),a.play()};var z=(s,o)=>{let n=s,i=n.dataset.filename,t=document.createElement("div");t.classList.add("moving"),t.style.position="absolute",t.style.left=0,t.style.top=0,t.style.width="".concat(e.size*2,"px"),t.style.height="".concat(e.size,"px");let a=document.createElement("div");a.classList.add("moving"),a.style.position="absolute",a.style.left=0,a.style.top=0,a.style.width="".concat(e.size,"px"),a.style.height="".concat(e.size,"px"),a.style.backgroundImage="url(".concat(e.coversPath).concat(i,")");let r=document.createElement("div");r.classList.add("moving"),r.style.position="absolute",r.style.left="".concat(e.size,"px"),r.style.top=0,r.style.width="".concat(e.size,"px"),r.style.height="".concat(e.size,"px"),r.style.backgroundImage="url(".concat(e.coversPath).concat(o,")"),t.append(a),t.append(r),n.classList.add("clipIt"),n.append(t);let p=t.animate([{left:0},{left:"-".concat(e.size,"px")}],{duration:Number(e.transitionDuration),iterations:1,fill:"forwards",easing:"ease-in"});p.cancel(),p.onfinish=()=>{n.style.backgroundImage="url(".concat(e.coversPath).concat(o,")"),n.dataset.filename=o,n.classList.remove("clipIt"),t.remove(),c()},d(o),p.play()};var D=(s,o)=>{let n=s,i=n.dataset.filename,t=document.createElement("div");t.classList.add("moving"),t.style.width="".concat(e.size,"px"),t.style.height="".concat(e.size,"px"),t.style.left=0,t.style.top=0,t.style.backgroundImage="url(".concat(e.coversPath).concat(i,")"),t.style.backgroundPosition="left center",n.append(t),n.style.backgroundImage="url(".concat(e.coversPath).concat(o,")");let a=t.animate([{width:"".concat(e.size,"px")},{width:0}],{duration:Number(e.transitionDuration),iterations:1,fill:"forwards",easing:"ease-in"});a.cancel(),a.onfinish=()=>{n.classList.remove("plughole"),n.dataset.filename=o,t.remove(),c()},d(o),a.play()};var k=(s,o)=>{let i=s,t=i.dataset.filename;i.classList.add("moving"),i.style.backgroundImage="url(".concat(e.coversPath).concat(t,"), url(").concat(e.coversPath).concat(o,")");let a=i.animate([{transform:"rotate(0deg) scale(1)"},{transform:"rotate(720deg) scale(".concat(.4,")")}],{duration:Number(e.transitionDuration)/2,iterations:1,fill:"forwards",easing:"ease-in"});a.cancel();let r=i.animate([{transform:"rotate(0deg) scale(".concat(.4,")")},{transform:"rotate(720deg) scale(1)"}],{duration:Number(e.transitionDuration)/2,iterations:1,fill:"forwards",easing:"ease-out"});r.cancel(),a.onfinish=()=>{i.style.backgroundImage="url(".concat(e.coversPath).concat(o,")"),d(o),i.dataset.filename=o,r.play()},r.onfinish=()=>{i.classList.remove("moving"),c()},a.play()};var E=(s,o)=>{let n=s,i=n.dataset.filename,t=10,a=e.size/t,r=[],p=[];for(let l=0;l<t;l++){let u=document.createElement("div");u.classList.add("c","moving","blinds-slat"),u.id="blinds-slat".concat(l),u.style.width="".concat(a,"px"),u.style.height="".concat(e.size,"px"),u.style.left="".concat(l*a,"px"),u.style.top=0,u.style.backgroundImage="url(".concat(e.coversPath).concat(i,")"),u.style.backgroundPosition="".concat(-l*a,"px 0"),n.append(u),r.push(u)}n.style.backgroundImage="url(".concat(e.coversPath).concat(o,")");for(let l=0;l<t;l++)p[l]=r[l].animate([{width:"".concat(a,"px")},{width:0}],{duration:Number(e.transitionDuration),iterations:1,fill:"forwards",easing:"ease-in"}),p[l].cancel(),p[l].onfinish=()=>{r[l].remove(),l===0&&(n.dataset.filename=o,c())};d(o);for(let l=0;l<t;l++)p[l].play()};var y=s=>{let o=s,n=Math.floor(Math.random()*e.coverCount),i=e.files[n];if(e.mode||(e.mode=e.initialMode),!h.includes(e.mode)){console.error("BAD! That's not an available mode, you dingo.\nMode attempted: ".concat(e.mode));return}let t=e.mode;switch(t==="random"&&(t=h[Math.floor(Math.random()*(h.length-1))]),t){case"fade":x(o,i);break;case"zoomIn":C(o,i);break;case"zoomOut":L(o,i);break;case"slide":z(o,i);break;case"reveal":D(o,i);break;case"spin":k(o,i);break;case"blinds":E(o,i);break;default:w(o,i)}},q=()=>{e.paused=!e.paused,document.body.classList.toggle("paused")},S=()=>{document.querySelector("#pause-button").addEventListener("click",q)},f=()=>{if(e.resetting)return;let s=Math.floor(Math.random()*e.count),o=document.querySelector('[data-count="'.concat(s,'"]'));y(o)},c=()=>{e.auto&&!e.resetting&&(e.paused?window.setTimeout(()=>{c()},500):window.setTimeout(()=>{f()},e.autoDelay))},d=s=>{let n=N(s).split("-----"),i=document.querySelector("footer");i.innerHTML="<p>".concat(I(n[0])," - ").concat(I(n[1]),"</p>")},N=s=>{let o=s.lastIndexOf(".");return s.slice(0,o)},I=s=>s.replace(/-/gm," ");var v=()=>{for(let s of g.divs)s.addEventListener("click",o=>{let n=o.target;y(n)})};var e={size:150,auto:!0,autoDelay:1e3,paused:!1,transitionDuration:1e3,coversPath:"/public/images/covers/",forceSmall:!1,resetting:!1,initialMode:"flip",initialFill:!0},m=window.structuredClone(e),B=()=>{let s=document.querySelector("#settings-mode");s.addEventListener("change",()=>{s.value==="auto"?(e.auto=!0,f()):(e.auto=!1,v()),$()})},O=()=>{let s=document.querySelector("#settings-start");s.addEventListener("change",()=>{e.initialFill=s.value==="filled",b()})},T=()=>{let s=document.querySelector("#settings-transition");s.addEventListener("change",()=>{e.mode=s.value})},H=()=>{let s=document.querySelector("#settings-duration");s.addEventListener("change",()=>{e.transitionDuration=s.value})},W=()=>{let s=document.querySelector("#settings-delay");s.addEventListener("change",()=>{e.autoDelay=s.value})},F=()=>{document.querySelector("#settings").classList.remove("u-hide")},A=()=>{document.querySelector("#settings").classList.add("u-hide")},Y=()=>{let s=!e.auto;e.auto=m.auto,e.autoDelay=m.autoDelay,e.transitionDuration=m.transitionDuration,e.initialMode=m.initialMode,e.initialFill=m.initialFill,e.mode=m.initialMode,document.querySelector("#settings-mode").value=m.auto?"auto":"click",document.querySelector("#settings-start").value=m.initialFill?"filled":"empty",document.querySelector("#settings-transition").value=m.initialMode,document.querySelector("#settings-duration").value=Number(m.transitionDuration),document.querySelector("#settings-delay").value=Number(m.autoDelay),s&&f()},j=()=>{document.querySelector("#settings-button").addEventListener("click",s=>{F(),s.target.classList.add("u-hide")}),document.querySelector("#settings-close").addEventListener("click",()=>{A(),document.querySelector("#settings-button").classList.remove("u-hide")}),document.querySelector("#settings-reset").addEventListener("click",()=>{Y()})},P=()=>{B(),O(),T(),H(),W(),j()};var g={divs:[],filenames:[]},R=()=>{let s=0;for(let o=0;o<e.colCount;o++)for(let n=0;n<e.rowCount;n++){let i=Math.floor(Math.random()*e.coverCount),t=document.createElement("div");t.classList.add("c"),t.style.width="".concat(e.size,"px"),t.style.height="".concat(e.size,"px"),t.style.left="".concat(e.size*n,"px"),t.style.top="".concat(e.size*o,"px"),t.dataset.row="row".concat(n),t.dataset.col="col".concat(o),t.dataset.count=s;let a="_-----_.png";e.initialFill&&(a="".concat(e.files[i])),t.style.backgroundImage="url(".concat(e.coversPath).concat(a,")"),t.dataset.filename=a,e.container.append(t),g.divs.push(t),s++}e.count=s,console.log("count: ".concat(s)),e.auto?f():v()},_=()=>{let s=document.querySelectorAll("#list li"),o=[];for(let n of s)o.push(n.textContent);return g.filenames=o,o},$=()=>{document.body.classList.remove("auto","click"),document.body.classList.add(e.auto?"auto":"click")},M=()=>{$(),e.files=_(),e.coverCount=e.files.length,e.container=document.querySelector("main"),e.container.replaceChildren();let s=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),o=document.body.clientHeight,n=s-e.size,i=o-e.size,t=Math.max(Math.floor(n/e.size),2),a=Math.floor(i/e.size);e.forceSmall&&(t=2,a=2),e.contWidth=t*e.size,e.contHeight=a*e.size,e.container.style.width="".concat(e.contWidth,"px"),e.container.style.height="".concat(e.contHeight,"px"),e.rowCount=Math.floor(e.contWidth/e.size),e.colCount=Math.floor(e.contHeight/e.size),console.log("availWidth: ".concat(n,", availHeight: ").concat(i,", rowLength: ").concat(t,", colHeight: ").concat(a)),R(),P()},V=()=>{console.log("let's go"),S(),M()},b=()=>{if(!e.resetting){e.resetting=!0;for(let s of g.divs)s.classList.add("resetFadeOut");window.setTimeout(()=>{e.resetting=!1,M()},(e.autoDelay+e.transitionDuration)*2)}};window.addEventListener("load",V);window.addEventListener("resize",b);})();
//# sourceMappingURL=main-2db5cba.js.map */
